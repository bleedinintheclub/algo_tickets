## 19. –û—á–µ—Ä–µ–¥—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (–ø–æ–≤—ã—à–µ–Ω–∏–µ / –ø–æ–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)  

### –°—É—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–û—á–µ—Ä–µ–¥—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (Priority Queue)** ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç **–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**,  
–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ –≤ –ø–æ—Ä—è–¥–∫–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏), –∞ –ø–æ **–Ω–∞–∏–≤—ã—Å—à–µ–º—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É**.

–ß–∞—â–µ –≤—Å–µ–≥–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **–±–∏–Ω–∞—Ä–Ω—É—é –∫—É—á—É (heap)**:

- –í **max-heap** ‚Äî —ç–ª–µ–º–µ–Ω—Ç —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ.
    
- –í **min-heap** ‚Äî —ç–ª–µ–º–µ–Ω—Ç —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –≤ –∫–æ—Ä–Ω–µ.

‚úÖ –ò –≤ min-heap, –∏ –≤ max-heap —ç–ª–µ–º–µ–Ω—Ç –≤ –∫–æ—Ä–Ω–µ –∏–º–µ–µ—Ç –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.
–†–∞–∑–Ω–∏—Ü–∞ —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
	‚Ä¢	–í max-heap ‚Äî —á–µ–º –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.
	‚Ä¢	–í min-heap ‚Äî —á–µ–º –º–µ–Ω—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

|–û–ø–µ—Ä–∞—Ü–∏—è|–û–ø–∏—Å–∞–Ω–∏–µ|–°–ª–æ–∂–Ω–æ—Å—Ç—å|
|---|---|---|
|**insert(x)**|–í—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞|`O(log n)`|
|**extract_max() / extract_min()**|–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (–Ω–∞–∏–º–µ–Ω—å—à–∏–º / –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–ª—é—á–æ–º)|`O(log n)`|
|**peek()**|–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ—Ä–Ω—è (—ç–ª–µ–º–µ–Ω—Ç–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º)|`O(1)`|
|**increase_key(i, new_value)**|–ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞|`O(log n)`|
|**decrease_key(i, new_value)**|–ü–æ–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞|`O(log n)`|
### –ò–¥–µ—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ `arr[i]` –º–æ–∂–µ—Ç **–Ω–∞—Ä—É—à–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –ø–∏—Ä–∞–º–∏–¥—ã**,  
–ø–æ—ç—Ç–æ–º—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

1. **–ï—Å–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–≤—ã—Å–∏–ª—Å—è** ‚Üí —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞–ª "–±–æ–ª—å—à–µ", —á–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å ‚Üí –≤—ã–∑—ã–≤–∞–µ–º `sift_up(i)`.
    
2. **–ï—Å–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–Ω–∏–∑–∏–ª—Å—è** ‚Üí —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞–ª "–º–µ–Ω—å—à–µ", —á–µ–º –ø–æ—Ç–æ–º–∫–∏ ‚Üí –≤—ã–∑—ã–≤–∞–µ–º `heapify_down(i)`.



### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```cpp
void sift_up(int* heap, int i) {
    while (i > 0 && heap[(i - 1) / 2] < heap[i]) {
        std::swap(heap[i], heap[(i - 1) / 2]);
        i = (i - 1) / 2;
    }
}

void heapify_down(int* heap, int n, int i) {
    int largest = i;
    int left = 2 * i + 1;
    int right = 2 * i + 2;

    if (left < n && heap[left] > heap[largest])
        largest = left;
    if (right < n && heap[right] > heap[largest])
        largest = right;

    if (largest != i) {
        std::swap(heap[i], heap[largest]);
        heapify_down(heap, n, largest);
    }
}

// –ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–ª—é—á–∞)
void increase_key(int* heap, int i, int new_value) {
    if (new_value < heap[i]) return; // –Ω–µ–ª—å–∑—è —É–º–µ–Ω—å—à–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
    heap[i] = new_value;
    sift_up(heap, i);
}

// –ü–æ–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–ª—é—á–∞)
void decrease_key(int* heap, int n, int i, int new_value) {
    if (new_value > heap[i]) return; // –Ω–µ–ª—å–∑—è –ø–æ–≤—ã—à–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
    heap[i] = new_value;
    heapify_down(heap, n, i);
}


// –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É i
bool delete_at(int* heap, int& n, int i) {
    if (i < 0 || i >= n) return false;
    std::swap(heap[i], heap[n-1]);
    --n;
    if (i < n) {
        if (i > 0 && heap[parent(i)] < heap[i]) {
            sift_up(heap, i);
        } else {
            heapify_down(heap, n, i);
        }
    }
    return true;
}


void insert(int* heap, int& heapSize, int capacity, int key) {
    if (heapSize >= capacity) {
        std::cout << "Heap overflow!\n";
        return;
    }

    // 1Ô∏è‚É£ –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫—É—á–∏
    heapSize = heapSize + 1;

    // 2Ô∏è‚É£ –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –ø–æ–∑–∏—Ü–∏—é
    heap[heapSize - 1] = key;

    // 3Ô∏è‚É£ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–æ –∫—É—á–∏ (–ø–æ–¥–Ω–∏–º–∞–µ–º –≤–≤–µ—Ä—Ö)
    sift_up(heap, heapSize-1);
}

// –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞–∫—Å–∏–º—É–º–∞ (–∫–æ—Ä–Ω—è). –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –µ—Å–ª–∏ –ø—É—Å—Ç–æ.
bool peek(int* heap, int n, int& out) {
    if (n == 0) return false;
    out = heap[0];
    return true;
}

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º—É–º–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –µ—Å–ª–∏ –ø—É—Å—Ç–æ.
bool extract_max(int* heap, int& n, int& out) {
    if (n == 0) return false;
    out = heap[0];
    std::swap(heap[0], heap[n-1]);
    --n;
    if (n > 0) heapify_down(heap, n, 0);
    return true;
}
```



### –ê—Å–∏–º–ø—Ç–æ—Ç–∏–∫–∞

|–û–ø–µ—Ä–∞—Ü–∏—è|–í—Ä–µ–º—è|
|---|---|
|–í—Å—Ç–∞–≤–∫–∞|`O(log n)`|
|–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º—É–º–∞|`O(log n)`|
|–ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞–∫—Å–∏–º—É–º–∞|`O(1)`|
|–ü–æ–≤—ã—à–µ–Ω–∏–µ/–ø–æ–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞|`O(log n)`|
|–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞|`O(n)`|

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ –∑–∞–¥–∞—á (CPU Scheduler)
    
- –ê–ª–≥–æ—Ä–∏—Ç–º—ã –î–µ–π–∫—Å—Ç—Ä—ã –∏ –ü—Ä–∏–º–∞
    
- –°–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π (event-driven simulation)
    
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `std::priority_queue` –≤ C++ STL
- 
# –û—á–µ—Ä–µ–¥—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ –º–∞—Å—Å–∏–≤–∞—Ö –∏ —Å–ø–∏—Å–∫–∞—Ö

## üß© –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –º–∞—Å—Å–∏–≤–µ

**–ò–¥–µ—è:**  
- –≠–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞ (`enqueue` ‚Äî –±—ã—Å—Ç—Ä–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è).  
- –ü—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ (`dequeue`) –∏—â–µ—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç —Å **–Ω–∞–∏–±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º**, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç **–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ–≥–æ –º–∞—Å—Å–∏–≤–∞**.  

**–ü–ª—é—Å—ã:**  
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è  
- –ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ (`O(1)`)  

**–ú–∏–Ω—É—Å—ã:**  
- –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (`O(n)`), —Ç.–∫. –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –º–∞–∫—Å–∏–º—É–º/–º–∏–Ω–∏–º—É–º –≤—Ä—É—á–Ω—É—é  

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞:**  
- –ß–∞—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã,  
- –ù–æ —Ä–µ–¥–∫–æ –∏–∑–≤–ª–µ–∫–∞–µ–º  

```cpp
enqueue(element, priority):
    append element to array

dequeue():
    find and remove element with highest priority
```

üìà **–ê—Å–∏–º–ø—Ç–æ—Ç–∏–∫–∞:**  
- –í—Å—Ç–∞–≤–∫–∞ ‚Äî `O(1)`  
- –£–¥–∞–ª–µ–Ω–∏–µ ‚Äî `O(n)`  


---

## üîó –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω–æ–º —Å–ø–∏—Å–∫–µ

**–ò–¥–µ—è:**  
- –°–ø–∏—Å–æ–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è **–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É**  
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∏—Å–∫ –º–µ—Å—Ç–∞ –≤—Å—Ç–∞–≤–∫–∏ (`O(n)`)  
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ (`dequeue`) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –±–µ—Ä—ë–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç (`O(1)`)  

**–ü–ª—é—Å—ã:**  
- –ë—ã—Å—Ç—Ä–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (`O(1)`)  
- –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤  

**–ú–∏–Ω—É—Å—ã:**  
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ (`O(n)`), —Ç.–∫. –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ–∑–∏—Ü–∏—é  

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞:**  
- –ß–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ,  
- –ê –≤—Å—Ç–∞–≤–∫–∏ —Ä–µ–¥–∫–∏–µ  

```cpp
enqueue(element, priority):
    insert element in sorted order by priority

dequeue():
    return first element
```

üìà **–ê—Å–∏–º–ø—Ç–æ—Ç–∏–∫–∞:**  
- –í—Å—Ç–∞–≤–∫–∞ ‚Äî `O(n)`  
- –£–¥–∞–ª–µ–Ω–∏–µ ‚Äî `O(1)`  

---

## üìò –ò—Ç–æ–≥–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | enqueue | dequeue | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-------------|----------|----------|--------------|
| –ù–∞ –º–∞—Å—Å–∏–≤–µ | O(1) | O(n) | –±—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–ª—è–µ–º, –¥–æ–ª–≥–æ –∏—â–µ–º –º–∞–∫—Å–∏–º—É–º |
| –ù–∞ —Å–ø–∏—Å–∫–µ  | O(n) | O(1) | –≤—Å—Ç–∞–≤–ª—è–µ–º —Å –ø–æ–∏—Å–∫–æ–º, –∏–∑–≤–ª–µ–∫–∞–µ–º –º–≥–Ω–æ–≤–µ–Ω–Ω–æ |


